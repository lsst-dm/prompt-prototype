description: Alert Production pipeline specialized for LSSTComCamSim

# This file should strive to contain just an import from ap_pipe.
# Exceptions are allowed temporarily when urgent bug fixes and
# prompt_processing build can't wait for the lsst_distrib
# release schedule.
imports:
  - location: $AP_PIPE_DIR/pipelines/LSSTComCamSim/ApPipe.yaml
    include:
      - prompt
tasks:
  # Turn on R/B analysis. This is a temporary patch until it is turned on
  # in ap_pipe.
  rbClassify:
    class: lsst.meas.transiNet.RBTransiNetTask
    config:
      modelPackageStorageMode: butler
      connections.science: initial_pvi
      connections.coaddName: parameters.coaddName
  transformDiaSrcCat:
    class: lsst.ap.association.TransformDiaSourceCatalogTask
    config:
      # Turn on R/B analysis
      doIncludeReliability: True
  diaPipe:
    class: lsst.ap.association.DiaPipelineTask
    config:
      # Alert distribution only runnable in PP environment.
      alertPackager.doProduceAlerts: True
